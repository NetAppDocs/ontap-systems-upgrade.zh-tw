---
sidebar: sidebar 
permalink: upgrade-arl-auto-affa900/overview_of_the_arl_upgrade.html 
keywords: overview, arl, upgrade, owner, controller, hardware 
summary: 瞭解AFF 如何AFF 執行從NetApp A700升級到Ar900 ARL控制器的程序。 
---
= ARL升級總覽
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
在使用ARL升級節點之前、您應該先瞭解程序的運作方式。在本內容中、程序分為幾個階段。



== 升級節點配對

若要升級節點配對、您需要準備原始節點、然後在原始節點和新節點上執行一系列步驟。然後您可以取消委任原始節點。



== ARL升級順序總覽

在程序期間、您可以使用更換的控制器硬體（一次一個控制器）來升級原始控制器硬體、並利用HA配對組態來重新配置非根集合體的擁有權。所有非根Aggregate都必須經過兩次重新定位、才能到達最終目的地、這是正確的升級節點。

每個Aggregate都有一個擁有者和目前擁有者。主擁有者是該集合體的實際擁有者、而目前擁有者則是暫時擁有者。

下表說明您在每個階段中執行的高層工作、以及階段結束時的集合擁有權狀態。程序稍後會提供詳細步驟：

[cols="35,65"]
|===
| 階段 | 步驟 


| link:verify_upgrade_hardware.html["階段1：準備升級"]  a| 
. 驗證升級硬體
. 執行預先檢查、確認您可以執行此作業
. 如果預先檢查失敗、請修正Aggregate所有權
. 輸入叢集基礎授權金鑰
. 取得儲存加密的IP位址
. 使用金鑰管理操作性傳輸協定（KMIP）伺服器來管理驗證
. 使用內建金鑰管理程式（OKM）管理儲存加密
. 靜止SnapMirror關係（選用）


第1階段結束時的Aggregate所有權：

* node1是node1集合體的主擁有者和目前擁有者
* node2是node2 Aggregate的主擁有者和目前擁有者




| link:relocate_non_root_aggr_and_nas_data_lifs_node1_node2.html["第2階段：從節點1重新部署資源、並淘汰AFF EsceA700或FAS9000節點1"]  a| 
. 將節點1擁有的非根Aggregate和NAS資料lifs重新部署到節點2
. 重新部署故障或被否決的集合體
. 淘汰節點1
. 移除AFF 功能不整的A700或FAS9000控制器和NVRAM模組
. 在AFF 節點1上安裝E4A900或FAS9500 NVRAM和控制器模組
. netboot node1


第2階段結束時的Aggregate所有權：

* node2是node1 Aggregate的目前擁有者
* node2是node2 Aggregate的主擁有者和目前擁有者




| link:boot_node1_with_a900_controller_and_nvs.html["第3階段：使用AFF 支援E4A900或FAS9500控制器和NVRAM模組的開機節點1"]  a| 
. 使用AFF EscoreA900或FAS9500控制器和NVRAM模組來開機節點1
. 驗證是否已成功安裝node1
. 還原node1網路組態
. 在升級的節點1上還原金鑰管理程式組態
. 將節點1擁有的非根Aggregate和NAS資料lifs從節點2移至升級的節點1


第3階段結束時的Aggregate所有權：

* 升級AFF 版的E4A900或FAS9500節點1是node1 Aggregate的主擁有者和目前擁有者
* node2是node2 Aggregate的主擁有者和目前擁有者




| link:relocate_non_root_aggr_nas_lifs_from_node2_to_node1.html["階段4：從節點2重新部署資源、並淘汰節點2"]  a| 
. 將非根Aggregate和NAS資料LIF從節點2重新定位至節點1
. 淘汰節點2


第4階段結束時的Aggregate所有權：

* 升級的node1是原屬於node1的Aggregate的主擁有者和目前擁有者
* node2是node2 Aggregate的主擁有者
* 升級的node1是node2 Aggregate的目前擁有者




| link:install_a900_nvs_and_controller_on_node2.html["第5階段：在AFF 節點2上安裝EFASA900或FAS9500 NVRAM和控制器模組"]  a| 
. 在AFF 節點2上安裝E4A900或FAS9500 NVRAM和控制器模組
. netboot node2


第5階段結束時的Aggregate所有權：

* node1是原屬於node1的Aggregate的主擁有者和目前擁有者。
* 升級的node2是原屬於node2的Aggregate的主擁有者和目前擁有者。




| link:boot_node2_with_a900_controller_and_nvs.html["第6階段：使用AFF E4A900或FAS9500控制器和NVRAM模組來開機節點2"]  a| 
. 使用AFF EscoreA900或FAS9500控制器和NVRAM模組來開機節點2
. 驗證是否已正確安裝節點2
. 還原node2網路組態
. 將非根Aggregate和NAS資料lifs移回節點2




| link:ensure_new_controllers_are_set_up_correctly.html["第7階段：完成升級"]  a| 
. 驗證新控制器的設定是否正確
. 在新的控制器模組上設定儲存加密
. 在新的控制器模組上設定NetApp Volume Encryption。
. 取消委任舊系統。
. 恢復NetApp SnapMirror作業


|===